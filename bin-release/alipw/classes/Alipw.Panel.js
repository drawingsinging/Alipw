Alipw.Panel=Alipw.extend(Alipw.Container,{baseCls:"alipw-panel",showHeader:true,closable:false,closeAction:"remove",closeBtnConfig:{},minWidth:200,minHeight:150,width:200,height:150,title:"",buttons:"",buttonAlign:"center",defaultButtonWidth:60,buttonGap:6,constructor:function(){Alipw.Panel.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Panel.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Panel.superclass.initialize.apply(this,arguments);this.headerButtonItems=new Array();this.buttonItems=new Array()},createDom:function(){Alipw.Panel.superclass.createDom.apply(this,arguments);this.el.append(['<div class="'+this.baseCls+'-wrap">','<div class="'+this.baseCls+'-header">','<span class="'+this.baseCls+'-header-left">','<span class="'+this.baseCls+'-header-right">','<span class="'+this.baseCls+'-header-center">','<span class="'+this.baseCls+'-header-text">','<span class="'+this.baseCls+'-header-text-shadow"></span>','<span class="'+this.baseCls+'-header-text-fore"></span>',"</span>",'<div class="'+this.baseCls+'-header-buttons"></div>',"</span>","</span>","</span>","</div>",'<div class="'+this.baseCls+'-body-wrap">','<div class="'+this.baseCls+'-body-left">','<div class="'+this.baseCls+'-body-right">','<div class="'+this.baseCls+'-body">','<div class="'+this.baseCls+'-body-content">',"</div>",'<div class="'+this.baseCls+'-body-buttonbar">',"</div>","</div>","</div>","</div>","</div>",'<div class="'+this.baseCls+'-footer">','<span class="'+this.baseCls+'-footer-left">','<span class="'+this.baseCls+'-footer-right">','<span class="'+this.baseCls+'-footer-center"></span>',"</span>","</span>","</div>","</div>"].join(""));this.header=this.el.find("."+this.baseCls+"-header");this.body=this.getBody();this.footer=this.el.find("."+this.baseCls+"-footer");this.buttonBar=this.el.find("."+this.baseCls+"-body-buttonbar");this.bodyWrap=this.el.find("."+this.baseCls+"-body-wrap");this.addEventListener("destroy",function(){this.headerButtonItems=null;this.buttonItems=null},this)},renderComplete:function(){Alipw.Panel.superclass.renderComplete.apply(this,arguments);this.setTitle(this.title);this.renderHeaderBtns();if(this.buttons instanceof Array&&this.buttons.length>0){this.addButtons(this.buttons)}},_doLayout:function(){Alipw.Panel.superclass._doLayout.apply(this,arguments);var b=this.el.find("."+this.baseCls+"-wrap");if(this.showHeader){b.removeClass(this.baseCls+"-noheader")}else{b.addClass(this.baseCls+"-noheader")}if(this.buttonItems.length>0){this.buttonBar.css("text-align",this.buttonAlign);this.buttonBar.show()}else{this.buttonBar.hide()}var b=this.el.find("."+this.baseCls+"-wrap");var a=b.outerHeight();var c=b.outerWidth();if(this.height){this.body.height(this.height-(a-this.body.height()))}if(this.width){this.buttonBar.width(10);this.body.width("auto");this.body.width(this.width-(c-this.body.width()));this.buttonBar.width(this.body.outerWidth()-(this.buttonBar.outerWidth()-this.buttonBar.width()))}},setTitle:function(a){this.el.find("."+this.baseCls+"-header-text-shadow").html(a);this.el.find("."+this.baseCls+"-header-text-fore").html(a)},renderHeaderBtns:function(){if(this.closable){if(!this.closeBtn){this.closeBtn=new Alipw.Button(jQuery.extend({cls:"button-alipw-panel-header-red alipw-panel-btn-close",iconCls:"icon-alipw-panel-closeBtn",label:"",width:45,height:22,inlineStyle:{"margin-right":"-1px"},renderTo:this.el.find("."+this.baseCls+"-header-buttons"),handler:this.closeBtnHandler,scope:this},this.closeBtnConfig));this.headerButtonItems.push(this.closeBtn);this.closeBtn.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation()},this,true)}}if(this.headerButtonItems.length<1){this.el.find("."+this.baseCls+"-header-buttons").hide()}else{this.el.find("."+this.baseCls+"-header-buttons").show()}},close:function(){var a=this.fireEvent("beforeClose",{},false);if(a==false){return}if(this.closeAction=="remove"){this.destroy()}else{if(this.closeAction="hide"){this.setVisible(false)}}},getWidthByBody:function(a){return a+(this.getWidth()-this.body.width())},getHeightByBody:function(a){return a+(this.getHeight()-this.body.height())},addButtons:function(b){if(b instanceof Array){for(var d=0,a=b.length;d<a;d++){this.createButton(b[d])}this.doLayout()}else{if(typeof(b)=="object"){var c=this.createButton(b);this.doLayout();return c}}},getButton:function(a){},getBody:function(){return this.el.find("."+this.baseCls+"-body-content")},closeBtnHandler:function(a){a.stopPropagation();this.close()},createButton:function(a){var b=new Alipw.Button(jQuery.extend({renderTo:this.buttonBar,width:this.defaultButtonWidth,inlineStyle:{margin:"0 "+this.buttonGap/2+"px"}},a));this.buttonItems.push(b);b.ownerComp=this;return b},createButtons_Panel:function(){this.addButtons(this.buttons)}});