Alipw.Component=function(){var a=function(b){this.config=b||(new Object());this.commitProperties();this.initialize();this.createDom();this._runAutoRender()};a.prototype={autoRender:true,visibleRender:true,renderTo:null,defaultEl:"div",baseCls:"",subCls:"",cls:"",overCls:"",downCls:"",enabled:true,destroyed:false,visible:true,floating:false,floatingManagement:true,draggable:false,tooltip:"",position:"",inlineStyle:null,listeners:null,commitProperties:function(){Alipw.apply(this,this.config)},initialize:function(){Alipw.ComponentManager.register(this)},createDom:function(){this.el=$(document.createElement(this.defaultEl));this.el.attr("alipw_component","true");if(this.listeners){for(var b in this.listeners){if(this.listeners[b] instanceof Function){this.addEventListener(b,this.listeners[b],this)}}}this.el.attr("id",this.id);if(this.baseCls){this.el.attr("class",this.baseCls)}if(this.subCls){this.el.addClass(this.subCls)}if(this.cls){this.el.addClass(this.cls)}if(this.zIndex){this.el.css("z-index",this.zIndex)}if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("position","absolute");this.x=this.getX()-jQuery(window).scrollLeft();this.y=this.getY()-jQuery(window).scrollTop();jQuery(window).bind("scroll",jQuery.proxy(this.scrollHandler_Component,this));this.addEventListener("destroy",function(c){jQuery(window).unbind("scroll",this.scrollHandler_Component)},this)}else{this.el.css("position","fixed")}}if(this.inlineStyle){this.el.css(this.inlineStyle)}},render:function(b){if(!b){if(this.renderTo){b=this.renderTo}else{b=document.body}}this.fireEvent("beforeRender",{},false);if(b instanceof Alipw.Container){b.appendChild(this,false)}else{b=Alipw.convertEl(b);b.append(this.el)}this.removed=false;this.fireEvent("afterRender",{},false);if(!this.rendered){this.renderComplete();this.rendered=true;this.creationCompleteFn_Component();this.fireEvent("creationComplete",{},false)}},renderComplete:function(b){this.addEventListener("afterLayout",this.afterLayoutHandler_Component,this);if(this.visibleRender&&this.el.is(":hidden")){var f=jQuery('<div style="position:absolute; left:-99999px; top:-99999px;"></div>');var e=this.el.next();var d=this.el.parent();jQuery(document.body).append(f);f.append(this.el);this.doLayout();if(e[0]){this.el.insertBefore(e)}else{d.append(this.el)}f.remove()}else{this.doLayout()}if(this.overCls){this.addEventListener("mouseover",this.mouseOverHandlerForOverCls_Component,this,true);this.addEventListener("mouseout",this.mouseOutHandlerForOverCls_Component,this,true)}if(this.downCls){var c=Alipw.createFuncProxy(this.mouseUpHandlerForDownCls_Component,this);this.addEventListener("mousedown",this.mouseDownHandlerForDownCls_Component,this,true);jQuery(document).bind("mouseup",c);this.addEventListener("destroy",function(g){jQuery(document).unbind("mouseup",c)},this)}},addEventListener:function(d,c,b,e){Alipw.EventManager.addListener(this,d,c,b,e)},removeEventListener:function(c,b,d){Alipw.EventManager.removeListener(this,c,b,d)},fireEvent:function(c,e,b,d){if(this.destroyed){return false}return Alipw.EventManager.fireEvent(this,c,e,b,d)},regEvents:function(d){for(var c=0,b=d.length;c<b;c++){Rainy.EventManager.register(d[c])}},update:function(){this.renderComplete(true)},show:function(){if(!this.rendered){this.render()}this.setVisible(true)},hide:function(){this.setVisible(false)},remove:function(b){if(this.destroyed){return}this.fireEvent("beforeRemove",{},false);if(b){this.el.remove()}else{this.el.detach()}this.removed=true;this.fireEvent("afterRemove",{},false)},destroy:function(){if(this.destroyed){return}this.fireEvent("destroy",{},false);this.el.find("*[alipw_component=true]").each(function(c,d){var b=Alipw.getComp(d.id);if(b){b.destroy()}});this.remove(true);if(this.parentContainer){this.parentContainer=null}Alipw.ComponentManager.unregister(this);this.el=null;this.destroyed=true},setVisible:function(e,d,b){if(!Alipw.isSet(d)){d=e}if(e){this.el.show();this.el.css("visibility","visible")}else{this.el.hide();if(d){this.el.show();this.el.css({visibility:"hidden"})}else{this.el.hide();this.el.css({visibility:"hidden"})}}var c=this.visible;this.visible=e;if(c!=e&&!b){this.fireEvent("visibilityChange",{},false)}},getVisible:function(){if(this.el.is(":hidden")){return false}else{return true}},getZIndex:function(){return this.zIndex},getX:function(){var b=this.el.offset().left;if(this.position=="fixed"){return b-jQuery(window).scrollLeft()}else{return b}},getY:function(){var b=this.el.offset().top;if(this.position=="fixed"){return b-jQuery(window).scrollTop()}else{return b}},setPosition:function(b,f,e,d,c){if(!Alipw.isSet(d)){d=true}if(!Alipw.isSet(c)){c=true}if(Alipw.isSet(b)){if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("left",(b+jQuery(window).scrollLeft())+"px");this._ie6_fixedX=b}else{this.el.css("left",b+"px")}}else{if(c){this.el.offset({left:b})}else{this.el.css({left:b})}}}if(Alipw.isSet(f)){if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("top",(f+jQuery(window).scrollTop())+"px");this._ie6_fixedY=f}else{this.el.css("top",f+"px")}}else{if(c){this.el.offset({top:f})}else{this.el.css("top",f+"px")}}}if(Alipw.isSet(e)){this.el.css("z-index",e)}if(d){this.fireEvent("move",{},false)}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},doLayout:function(c){var d=this;var b=function(){d.fireEvent("beforeLayout",{},false);d._doLayout();d.fireEvent("afterLayout",{},false)};if(this.__doLayoutBuffer){clearTimeout(this.__doLayoutBuffer)}if(c){this.__doLayoutBuffer=setTimeout(b,1)}else{b()}},_doLayout:function(){},_runAutoRender:function(){if(this.autoRender){this.render()}},afterLayoutHandler_Component:function(b){if(this.parentContainer){this.parentContainer.doLayout(true)}},scrollHandler_Component:function(){var b=jQuery(window);if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css({left:b.scrollLeft()+this._ie6_fixedX,top:b.scrollTop()+this._ie6_fixedY})}}},creationCompleteFn_Component:function(){if(this.draggable){var c=typeof(this.draggable)=="object"?this.draggable:{};this.dragSupporter=new Alipw.DragSupporter(jQuery.extend({target:this},c));this.addEventListener("destroy",function(){if(this.dragSupporter){this.dragSupporter.destroy();this.dragSupporter=null}},this);this.addEventListener("dragstart",this.dragStartHandler_Component,this);this.addEventListener("dragend",this.dragEndHandler_Component,this)}if(this.tooltip){var b;if(typeof(this.tooltip)=="object"){b=this.draggable}else{if(typeof(this.tooltip)=="string"){b={html:this.tooltip}}}this.tooltip=new Alipw.ToolTip(jQuery.extend({target:this},b))}},dragStartHandler_Component:function(){if(!this.dragSupporter.useProxy){if(this.shadow){this.shadow.disable()}}},dragEndHandler_Component:function(c,b){if(this.shadow){this.shadow.enable()}},mouseOverHandlerForOverCls_Component:function(b){if(this.destroyed||!this.enabled){return}this.el.addClass(this.overCls)},mouseOutHandlerForOverCls_Component:function(b){if(this.destroyed||!this.enabled){return}this.el.removeClass(this.overCls)},mouseDownHandlerForDownCls_Component:function(b){if(this.destroyed||!this.enabled){return}this.el.addClass(this.downCls)},mouseUpHandlerForDownCls_Component:function(b){if(this.destroyed||!this.enabled){return}this.el.removeClass(this.downCls)}};return a}();