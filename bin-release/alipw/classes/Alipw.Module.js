Alipw.Module=Alipw.extend(Alipw.Component,{template:"",templateUrl:"",scripts:null,scriptUrls:null,loadingCls:"",commitProperties:function(){Alipw.Module.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Module.superclass.initialize.apply(this,arguments);if(!this.scripts){this.scripts=new Array()}if(!this.scriptUrls){this.scriptUrls=new Array()}this.context=new Object();this.__componentMgr=new Object()},createDom:function(){Alipw.Module.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Module.superclass.renderComplete.apply(this,arguments)},destroy:function(){var a;for(var b in this.__componentMgr){a=Alipw.getInstance(b);if(a){a.destroy()}}Alipw.Module.superclass.destroy.apply(this,arguments)},addScript:function(a){this.scripts.push(a)},load:function(b){this.fireEvent("beforeModuleLoad",{},false);if(this.loadingCls){this.el.addClass(this.loadingCls)}this.el.empty();for(var c=0,a=this.scripts.length;c<a;c++){if(this.scripts[c].__Alipw_needToReload){this.scripts.splice(c,1);a=this.scripts.length;c--}}if(this.templateUrl){this.loadTemplate_Module(b)}else{this.loadScripts_Module()}},create:function(c,b){var a;if(c){a=new c(b);if(a instanceof Alipw.Component||a instanceof Alipw.Nonvisual){this.__componentMgr[a.id]=true;a.addEventListener("destroy",function(){this.__componentMgr[a.id]=null},this)}}return a},getInstance:function(d){var b=new Object();var a;for(var c in this.__componentMgr){a=Alipw.getInstance(c);if(!d&&a){b[c]=a}else{if(d=="module"&&a instanceof Alipw.Module){b[c]=a}else{if(d=="component"&&a instanceof Alipw.Component){b[c]=a}else{if(d=="nonvisual"&&a instanceof Alipw.Nonvisual){b[c]=a}}}}}return b},loadTemplate_Module:function(a){var e=this;if(!a){a=new Object()}var b=a.url||this.templateUrl;var d=a.method||"GET";var c=a.params;jQuery.ajax({url:b,type:d,data:c,success:function(f){e.template=f;e.loadScripts_Module()}})},loadScripts_Module:function(){if(this.destroyed){return}var d=this;var a=this.scriptUrls.length;var b=0;var c=function(){if(d.destroyed){return}var e=Alipw.loadScript({url:d.scriptUrls[b],success:function(){if(Alipw.Module.__moduleScriptFn instanceof Function){d.addScript(Alipw.Module.__moduleScriptFn);Alipw.Module.__moduleScriptFn=null}b++;if(b>=a){d.renderContent_Module()}else{c()}}});d.addEventListener("destroy",function(){jQuery(e).remove()})};if(a>0){c()}else{this.renderContent_Module()}},renderContent_Module:function(){if(this.destroyed){return}if(this.loadingCls){this.el.removeClass(this.loadingCls)}this.fireEvent("moduleLoaded",{},false);if(this.template){this.el.append(jQuery(this.template))}for(var b=0,a=this.scripts.length;b<a;b++){if(this.destroyed){return}this.scripts[b].call(this)}this.fireEvent("moduleRendered",{},false)}});