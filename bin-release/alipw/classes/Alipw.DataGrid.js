Alipw.DataGrid=Alipw.extend(Alipw.BoxComponent,{applyTo:null,baseCls:"alipw-datagrid",showHeader:true,showFooter:false,altGrid:true,noneText:"很抱歉, 暂时没有相关数据!",gridConfig:[],gridData:[],cacheData:[],constructor:function(){Alipw.DataGrid.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DataGrid.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.DataGrid.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.DataGrid.superclass.createDom.apply(this,arguments);var a=this;a.table=jQuery('<table class="'+this.baseCls+'-table"></table>');if(jQuery.isArray(a.gridConfig)&&a.gridConfig.length>0){a.ths=[];a.tds=[];jQuery.each(a.gridConfig,function(d,b){if(jQuery.isPlainObject(b)){var c=b.name,e=b.field;a.ths.push('<th class="'+a.baseCls+"-field-"+e+'">'+c+"</th>")}});a.htr="<tr>"+a.ths.join("")+"</tr>"}a.createThead();a.createTfoot();a.createTbody();a.el.append(a.table)},createThead:function(){var a=this;if(a.showHeader){a.thead=jQuery('<thead class="'+a.baseCls+'-thead"></thead>').append(a.htr);a.table.append(a.thead)}},createTfoot:function(){var a=this;if(a.showFooter){a.tfoot=jQuery('<tfoot class="'+a.baseCls+'-tfoot"></tfoot>').append(a.htr);a.table.append(a.tfoot)}},createTbody:function(){var a=this;a.tbody=jQuery('<tbody class="'+a.baseCls+'-tbody"></tbody>');a.table.append(a.tbody)},update:function(c){var a=this;a.gridData=c;a.tbody.empty();if(jQuery.isArray(c)&&c.length>0){a.tds=[];jQuery.each(c,function(e,d){a.item=$("<tr></tr>");if(a.altGrid&&e%2>0){a.item.addClass("alipw-datagrid-alt")}jQuery.each(a.gridConfig,function(j,f){var h=f.name,m=f.field,l=d[m];var i=(f.showValue)?f.showValue:"{$value}";var g=new Alipw.Template(['<td id="cell_{$row}_{$column}" class="{$baseCls}-value-{$field}">',i,"</td>"]);g.set({baseCls:a.baseCls,row:e,column:j,name:h,field:m,value:l});var k=g.compile();if(jQuery.isPlainObject(f.style)){k.css(f.style)}if(jQuery.isFunction(f.handlers)){k.empty();values=a.gridData[e];f.handlers(k,values)}a.item.append(k)});a.tbody.append(a.item)})}else{var b=new Alipw.Template(['<tr><td id="cell_none" class="{$baseCls}-value-none" colspan="{$colspan}">{$noneText}</td></tr>']);b.set({baseCls:a.baseCls,colspan:a.gridConfig.length,noneText:a.noneText});a.tbody.append(b.compile())}},renderComplete:function(){Alipw.DataGrid.superclass.renderComplete.apply(this,arguments);var a=this;a.update(a.gridData)}});