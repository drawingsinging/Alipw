Alipw.ToolTip=Alipw.extend(Alipw.BorderContainer,{html:"",target:null,showDelay:0.5,hideDelay:0.2,position:"auto",floating:true,showShadow:true,textMaxWidth:300,offsetX:0,offsetY:20,triggerEvents:["mouseover"],hideEvents:["mouseout"],baseCls:"alipw-tooltip",autoRender:false,constructor:function(){Alipw.ToolTip.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ToolTip.superclass.commitProperties.apply(this,arguments);this.targetEl=Alipw.convertEl(this.target)},initialize:function(){Alipw.ToolTip.superclass.initialize.apply(this,arguments);if(this.targetEl){for(var b=0,a=this.triggerEvents.length;b<a;b++){this.targetEl.bind(this.triggerEvents[b],jQuery.proxy(this.showHandler,this))}for(var b=0,a=this.hideEvents.length;b<a;b++){this.targetEl.bind(this.hideEvents[b],jQuery.proxy(this.hideHandler,this))}this.targetEl.bind("mousemove",jQuery.proxy(this.updateTipPos,this))}},createDom:function(){Alipw.ToolTip.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.ToolTip.superclass.renderComplete.apply(this,arguments);this.addEventListener("mouseover",this.showHandler,this,true);this.addEventListener("mouseout",this.hideHandler,this,true)},showTip:function(){if(!this.lastPos){return}this.show();if(this.__layoutChanged==true){this.refreshLayout_ToolTip();this.__layoutChanged=false}var a=this.lastPos[0];var e=this.lastPos[1];var b=[Alipw.getWin().width(),Alipw.getWin().height()];var d=b[0]+Alipw.getWin().scrollLeft()-5;var c=b[1]+Alipw.getWin().scrollTop()-5;if(a+this.el.outerWidth()>d){a=d-this.el.outerWidth()}if(e+this.el.outerHeight()>c){e=c-this.el.outerHeight()}if(a<0){a=0}if(e<0){e=0}this.setPosition(a,e)},setHtml:function(a){this.html=a;if(this.rendered){this.getBody().html(a)}if(this.visible&&this.rendered){this.refreshLayout_ToolTip()}else{this.__layoutChanged=true}},refreshLayout_ToolTip:function(){this.width=null;var a=this.getBody();a.css({width:"",height:""});this.el.css({width:"",height:""});this.doLayout();this.fireEvent("resize")},_doLayout:function(){if(this.textMaxWidth){var a=this.getBody();a.css("white-space","nowrap");if(this.textMaxWidth<a.width()){this.width=this.getWidthByBody(this.textMaxWidth)}a.css("white-space","")}Alipw.ToolTip.superclass._doLayout.apply(this,arguments)},showHandler:function(a){clearTimeout(this.hideDelayTimer);clearTimeout(this.showDelayTimer);if(this.visible&&this.rendered){return}this.updateTipPos(a);this.showDelayTimer=setTimeout(jQuery.proxy(this.showTip,this),this.showDelay*1000)},hideHandler:function(a){clearTimeout(this.showDelayTimer);clearTimeout(this.hideDelayTimer);if(this.rendered){this.hideDelayTimer=setTimeout(jQuery.proxy(this.hide,this),this.hideDelay*1000)}},updateTipPos:function(a){this.lastPos=[a.pageX+this.offsetX,a.pageY+this.offsetY]}});