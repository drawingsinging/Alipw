Alipw.Scrollbar=Alipw.extend(Alipw.Slider,{subCls:"alipw-scrollbar",target:null,mouseWheelDelta:120,width:0,showFill:false,tween:false,constructor:function(){Alipw.Scrollbar.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Scrollbar.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Scrollbar.superclass.initialize.apply(this,arguments);if(this.target){if(this.target instanceof Alipw.Container){}else{this._targetEl=Alipw.convertEl(this.target);this.renderTo=this._targetEl;if(this._targetEl[0]){this._targetEl.css("overflow","hidden");var c=this._targetEl.contents();for(var b=0,a=c.length;b<a;b++){if(c[b].className&&c[b].className.indexOf("alipw-scrollbar-container")!=-1){this._container=jQuery(c[b]);c.splice(b,1);a=c.length;b--;continue}if(c[b].className&&c[b].className.indexOf("alipw-scrollbar")!=-1){c.splice(b,1);a=c.length;b--;continue}}if(!this._container){this._container=jQuery('<div class="alipw-scrollbar-container"></div>');this._targetEl.append(this._container)}this._container.append(c)}}}},createDom:function(){Alipw.Scrollbar.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Scrollbar.superclass.renderComplete.apply(this,arguments);if(this.type=="vertical"){this.el.css({right:"0",top:"0"})}else{this.el.css({bottom:"0",left:"0"})}this.addEventListener("valueChange",this.scrollHandler_Scrollbar,this);if(jQuery.browser.mozilla){this._targetEl.bind("DOMMouseScroll",jQuery.proxy(function(a){var b=-a.detail/3;this.mouseWheelHandler_Scrollbar(a,b)},this))}else{this._targetEl.bind("mousewheel",jQuery.proxy(function(a){var b;if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=a.detail/3}}this.mouseWheelHandler_Scrollbar(a,b)},this))}},disable:function(){Alipw.Scrollbar.superclass.disable.apply(this,arguments);this._container.css("height","auto");this.setVisible(false)},enable:function(){Alipw.Scrollbar.superclass.enable.apply(this,arguments);this.setVisible(true);this.doLayout()},_doLayout:function(){if(!this._targetEl||!this._targetEl[0]){return}this.refreshContents_Scrollbar();this.refreshScrollbar_Scrollbar();Alipw.Scrollbar.superclass._doLayout.apply(this,arguments)},mouseWheelHandler_Scrollbar:function(a,b){if(this.type!="vertical"||!this.visible){return}a.stopPropagation();a.preventDefault();this.setValue(this.value+(-b)*this.mouseWheelDelta)},refreshContents_Scrollbar:function(){var c=this._targetEl.contents();for(var b=0,a=c.length;b<a;b++){if(c[b].className&&c[b].className.indexOf("alipw-scrollbar")!=-1){c.splice(b,1);a=c.length;b--;continue}}if(c.length>0){this._container.append(c)}},refreshScrollbar_Scrollbar:function(){var d=parseInt(this._container.css("padding-bottom"));this._container.height(this._targetEl.height()-d);var f=parseInt(this._container.css("padding-right"));this._container.width(this._targetEl.width()-f);var c=this._container[0].scrollHeight;var e=this._container.height();var a=this._container[0].scrollWidth;var b=this._container.width();this.setVisible(true);if(this.type=="vertical"){if(c>e){this.width=this._targetEl.innerHeight();if(this._targetEl.css("position")=="static"){this._targetEl.css("position","relative")}this._block.setHeight((e/c)*this.width);this.maxValue=c-e;this._container.css("padding-right",this.el.outerWidth()+"px");this._container.width(this._targetEl.width()-this.el.outerWidth())}else{this._container.css("padding-right","0");this._container.width(this._targetEl.width());if(jQuery.browser.msie){this.setVisible(false,true)}else{this.setVisible(false)}}}else{if(a>b){this.width=this._targetEl.innerWidth();if(this._targetEl.css("position")=="static"){this._targetEl.css("position","relative")}this._block.width((b/a)*this.width);this.maxValue=a-b;this._container.css("padding-bottom",this.el.outerHeight()+"px");this._container.height(this._targetEl.height()-this.el.outerHeight())}else{this._container.css("padding-bottom","0");this._container.height(this._targetEl.height());if(jQuery.browser.msie){this.setVisible(false,true)}else{this.setVisible(false)}}}this.setValue(this.value)},scrollHandler_Scrollbar:function(a){if(this._targetEl&&this._targetEl[0]){if(this.type=="vertical"){if(this.tween){this._container.stop();this._container.animate({scrollTop:parseInt(a.value)},800,"easeOutExpo")}else{this._container[0].scrollTop=parseInt(a.value)}}else{if(this.tween){this._container.stop();this._container.animate({scrollLeft:parseInt(a.value)},800,"easeOutExpo")}else{this._container[0].scrollLeft=parseInt(a.value)}}}}});