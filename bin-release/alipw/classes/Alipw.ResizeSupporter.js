Alipw.ResizeSupporter=Alipw.extend(Alipw.Nonvisual,{target:"",minWidth:16,minHeight:16,maxWidth:"",maxHeight:"",constructor:function(){Alipw.ResizeSupporter.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ResizeSupporter.superclass.commitProperties.apply(this,arguments);if(this.target instanceof Alipw.Component){this.targetEl=this.target.el}else{this.targetEl=Alipw.convertEl(this.target)}},initialize:function(){Alipw.ResizeSupporter.superclass.initialize.apply(this,arguments);if(this.targetEl.css("position")=="static"){this.targetEl.addClass("alipw-resizesupporter")}this.topLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-left"></div>');this.topCenterCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-center"></div>');this.topRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-right"></div>');this.middleLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-middle-left"></div>');this.middleRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-middle-right"></div>');this.bottomLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-left"></div>');this.bottomCenterCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-center"></div>');this.bottomRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-right"></div>');this.targetEl.append(this.topCenterCorner).append(this.middleLeftCorner).append(this.middleRightCorner).append(this.bottomCenterCorner).append(this.topLeftCorner).append(this.topRightCorner).append(this.bottomLeftCorner).append(this.bottomRightCorner);this.topLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.topCenterCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.topRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.middleLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.middleRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomCenterCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));var c=Alipw.createFuncProxy(this.move_ResizeSupporter,this);var b=Alipw.createFuncProxy(this.release_ResizeSupporter,this);jQuery(document).bind("mousemove",c);jQuery(document).bind("mouseup",b);this.addEventListener("destroy",function(){jQuery(document).unbind("mousemove",c);jQuery(document).unbind("mouseup",b)},this);if(parseInt(Alipw.ie())<7){var a=function(){this.middleRightCorner.height(this.targetEl.height());this.middleLeftCorner.height(this.targetEl.height());this.topCenterCorner.width(this.targetEl.width());this.bottomCenterCorner.width(this.targetEl.width())};a.call(this);this.targetEl.bind("resize",jQuery.proxy(a,this));this.addEventListener("destroy",function(){this.targetEl.unbind("resize",a)},this)}},enable:function(){Alipw.ResizeSupporter.superclass.enable.apply(this,arguments);this.topLeftCorner.show();this.topCenterCorner.show();this.topRightCorner.show();this.middleLeftCorner.show();this.middleRightCorner.show();this.bottomLeftCorner.show();this.bottomCenterCorner.show();this.bottomRightCorner.show()},disable:function(){Alipw.ResizeSupporter.superclass.disable.apply(this,arguments);this.topLeftCorner.hide();this.topCenterCorner.hide();this.topRightCorner.hide();this.middleLeftCorner.hide();this.middleRightCorner.hide();this.bottomLeftCorner.hide();this.bottomCenterCorner.hide();this.bottomRightCorner.hide()},getReady_ResizeSupporter:function(f){if(!this.enabled){return}f.preventDefault();f.stopPropagation();if(f.currentTarget.setCapture){f.currentTarget.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}this.ready=true;if(f.currentTarget.className.indexOf("edge-top-left")!=-1){this.type="nw"}else{if(f.currentTarget.className.indexOf("edge-top-center")!=-1){this.type="n"}else{if(f.currentTarget.className.indexOf("edge-top-right")!=-1){this.type="ne"}else{if(f.currentTarget.className.indexOf("edge-middle-left")!=-1){this.type="w"}else{if(f.currentTarget.className.indexOf("edge-middle-right")!=-1){this.type="e"}else{if(f.currentTarget.className.indexOf("edge-bottom-left")!=-1){this.type="sw"}else{if(f.currentTarget.className.indexOf("edge-bottom-center")!=-1){this.type="s"}else{if(f.currentTarget.className.indexOf("edge-bottom-right")!=-1){this.type="se"}}}}}}}}var h,b,a,g;if(this.target instanceof Alipw.Component){h=this.target.getWidth();b=this.target.getHeight();targetX=this.target.getX();g=this.target.getY()}else{h=this.targetEl.width();b=this.targetEl.height();targetX=this.targetEl.offset().left;g=this.targetEl.offset().top}var j=[targetX,g];var i=[targetX+h,g];var c=[targetX,g+b];var d=[targetX+h,g+b];this.originalPoints=[j,i,c,d];if(this.target instanceof Alipw.Component&&this.target.position=="fixed"){this.anchor=[f.clientX,f.clientY]}else{this.anchor=[f.pageX,f.pageY]}},move_ResizeSupporter:function(g){if(!this.enabled||!this.ready){return}g.preventDefault();if(!this.resizing){this.resizing=true;if(!this.resizeProxy){this.resizeProxy=new Alipw.BorderContainer({cls:"alipw-resizeproxy",width:this.targetEl.width(),height:this.targetEl.height(),floating:true,position:(this.target instanceof Alipw.Component)?this.target.position:""});this.addEventListener("destroy",function(){if(this.resizeProxy){this.resizeProxy.destroy();this.resizeProxy=null}},this)}this.resizeProxy.el.css("cursor",this.type+"-resize");Alipw.ComponentManager.bringToFront(this.resizeProxy);this.resizeProxy.show();this.resizeProxy.setPosition(this.originalPoints[0][0],this.originalPoints[0][1])}var c=this.resizeProxy.position=="fixed"?[g.clientX,g.clientY]:[g.pageX,g.pageY];var d,j,i,b,a;if(this.type=="se"){d=c[0]-this.originalPoints[0][0]+(this.originalPoints[3][0]-this.anchor[0]);j=c[1]-this.originalPoints[0][1]+(this.originalPoints[3][1]-this.anchor[1])}else{if(this.type=="s"){j=c[1]-this.originalPoints[0][1]+(this.originalPoints[3][1]-this.anchor[1])}else{if(this.type=="e"){d=c[0]-this.originalPoints[0][0]+(this.originalPoints[3][0]-this.anchor[0])}else{if(this.type=="nw"){d=this.originalPoints[3][0]-c[0]+(this.anchor[0]-this.originalPoints[0][0]);j=this.originalPoints[3][1]-c[1]+(this.anchor[1]-this.originalPoints[0][1]);b=true;a=true;i=this.originalPoints[3]}else{if(this.type=="n"){j=this.originalPoints[3][1]-c[1]+(this.anchor[1]-this.originalPoints[0][1]);a=true;i=this.originalPoints[2]}else{if(this.type=="w"){d=this.originalPoints[3][0]-c[0]+(this.anchor[0]-this.originalPoints[0][0]);b=true;i=this.originalPoints[1]}else{if(this.type=="sw"){d=this.originalPoints[1][0]-c[0]+(this.anchor[0]-this.originalPoints[2][0]);j=c[1]-this.originalPoints[1][1]+(this.originalPoints[2][1]-this.anchor[1]);b=true;i=this.originalPoints[1]}else{if(this.type=="ne"){d=c[0]-this.originalPoints[2][0]+(this.originalPoints[1][0]-this.anchor[0]);j=this.originalPoints[2][1]-c[1]+(this.anchor[1]-this.originalPoints[1][1]);a=true;i=this.originalPoints[2]}}}}}}}}if(this.minWidth&&d<this.minWidth){d=this.minWidth}else{if(this.maxWidth&&d>this.maxWidth){d=this.maxWidth}}if(this.minHeight&&j<this.minHeight){j=this.minHeight}else{if(this.maxHeight&&j>this.maxHeight){j=this.maxHeight}}var h=b?this.resizeProxy.setPosition(i[0]-d):null;var f=a?this.resizeProxy.setPosition(null,i[1]-j):null;if(Alipw.isSet(d)){this.resizeProxy.setWidth(d)}if(Alipw.isSet(j)){this.resizeProxy.setHeight(j)}if(Alipw.isSet(h)||Alipw.isSet(f)){this.resizeProxy.setPosition(h,f)}},release_ResizeSupporter:function(a){if(!this.enabled||!this.ready){return}if(a.currentTarget.releaseCapture){a.currentTarget.releaseCapture()}else{if(window.releaseEvents){window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}if(this.resizing){this.resizing=false;if(this.target instanceof Alipw.Component){this.target.setWidth(this.resizeProxy.getWidth());this.target.setHeight(this.resizeProxy.getHeight());if(this.target.el.css("position")=="fixed"||this.target.el.css("position")=="absolute"){this.target.setPosition(this.resizeProxy.getX(),this.resizeProxy.getY())}}else{this.targetEl.width(this.resizeProxy.getWidth()-(this.targetEl.outerWidth()-this.targetEl.width()));this.targetEl.height(this.resizeProxy.getHeight()-(this.targetEl.outerHeight()-this.targetEl.height()));if(this.targetEl.css("position")=="fixed"||this.targetEl.css("position")=="absolute"){this.targetEl.offset({x:this.resizeProxy.getX(),y:this.resizeProxy.getY()})}}}if(this.resizeProxy){this.resizeProxy.setVisible(false)}this.ready=false},getHandledPosition_ResizeSupporter:function(b,h){var j=jQuery(window);var c=j.width();var d=j.height();var f=Alipw.getDocWidth();var k=Alipw.getDocHeight();var i,e;i=this.targetEl.outerWidth();e=this.targetEl.outerHeight();if(this.target.position=="fixed"){if(b<10){b=10}else{if(b+i>c-10){b=c-i-10}}if(h<10){h=10}else{if(h+e>d-10){h=d-e-10}}}else{var a=c>f?c:f;var g=d>k?d:k;if(b<10){b=10}else{if(b+i>a-10){b=a-i-10}}if(h<10){h=10}else{if(h+e>g-10){h=g-e-10}}}return[b,h]}});