Alipw.Shadow=Alipw.extend(Alipw.BoxComponent,{floating:true,mode:"drop",target:null,floatingManagement:false,baseCls:"alipw-shadow",constructor:function(a){Alipw.Shadow.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Shadow.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Shadow.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.Shadow.superclass.createDom.apply(this,arguments);if(Alipw.ie()&&parseInt(Alipw.ie())<7){this.el.attr("class","alipw-ie-shadow")}else{this.el.append(['<div class="xst">','<div class="xstl"></div>','<div class="xstc"></div>','<div class="xstr"></div>',"</div>",'<div class="xsc">','<div class="xsml"></div>','<div class="xsmc"></div>','<div class="xsmr"></div>',"</div>",'<div class="xsb">','<div class="xsbl"></div>','<div class="xsbc"></div>','<div class="xsbr"></div>',"</div>"].join(""))}if(this.target instanceof Alipw.BoxComponent){var a=Alipw.createFuncProxy(this.applyToElement,this);this.target.addEventListener("resize",a);this.target.addEventListener("move",a);this.target.addEventListener("visibilityChange",a);this.target.addEventListener("afterRemove",a);this.target.addEventListener("afterRender",a);this.addEventListener("destroy",function(){this.target.removeEventListener("resize",a);this.target.removeEventListener("move",a);this.target.removeEventListener("visibilityChange",a);this.target.removeEventListener("afterRemove",a);this.target.removeEventListener("afterRender",a)},this)}},render:function(a){Alipw.Shadow.superclass.render.apply(this,arguments);if(this.target){this.applyToElement()}},renderComplete:function(){Alipw.Shadow.superclass.renderComplete.apply(this,arguments)},_doLayout:function(){Alipw.Shadow.superclass._doLayout.apply(this,arguments);if(!(Alipw.ie()&&parseInt(Alipw.ie())<7)){if(this.width){if(this.width<12){this.width=12}this.el.find(".xstc").width(this.width-12);this.el.find(".xsmc").width(this.width-12);this.el.find(".xsbc").width(this.width-12)}if(this.height){if(this.height<12){this.height=12}this.el.find(".xsc").height(this.height-12)}}else{this.el.width(this.width-9);this.el.height(this.height-9)}},enable:function(){Alipw.Shadow.superclass.enable.apply(this,arguments);this.setVisible(true);this.applyToElement()},disable:function(){Alipw.Shadow.superclass.disable.apply(this,arguments);this.setVisible(false)},applyToElement:function(f){var h=this.target;if(h instanceof Alipw.BoxComponent&&h.floating){var b,a,c,d;if(this.mode=="drop"){b=a=-3;c=d=8}else{if(this.mode=="frame"){b=a=-5;c=d=10}else{if(this.mode=="sides"){b=-5;a=-3;c=10;d=8}}}this.setWidth(h.getWidth()+c);this.setHeight(h.getHeight()+d);this.setPosition(h.getX()+b,h.getY()+a,h.getZIndex()-1,true,false);if(this.enabled){var g;if(h.removed){g=false}else{g=h.visible}this.setVisible(g)}else{this.setVisible(false)}}}});